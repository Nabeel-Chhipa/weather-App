<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&family=Urbanist:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <script
      src="https://kit.fontawesome.com/1e5c4d3074.js"
      crossorigin="anonymous"
    ></script>
    <title>Weather App</title>
  </head>
  <body>
    <main>
      <div id="boxWrapper">
        <div id="dataWrapper">
          <div id="mainData">
            <!-- <p class="dataWrapper__title">Country</p> -->
          </div>
        </div>
        <div id="inputWrapper">
          <form onsubmit="getWeather(); return false;">
            <input
              type="text"
              name="location"
              id="locationName"
              placeholder="Enter Location"
              required
            />
            <!-- <button type="submit">Get Weather</button> -->
            <i class="fa-solid fa-magnifying-glass"></i>
          </form>

          <div id="weatherDetails">
            <h4>Weather details</h4>

            <div id="weatherDetails__data"></div>
          </div>
        </div>
      </div>
    </main>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      const getWeather = () => {
        let userInput = document.querySelector("#locationName").value;
        let URL =
          "https://api.openweathermap.org/data/2.5/weather?units=metric";
        let API_KEY = "f23d04b0d7e396743337140230ef73a3";
        axios
          .get(`${URL}&appid=${API_KEY}&q=${userInput}`)
          .then((res) => {
            // console.log(res.data);
            // {
            //   res.data.weather[0].description === "smoke" ?
            //   document.querySelector("#boxWrapper").style.backgroundImage = "url('./images/nathan-anderson-BisaxHbl8GU-unsplash.jpg')"
            //   :
            //   ''
            // }
            if (res.data.weather[0].description === "smoke") {
              document.querySelector("#boxWrapper").style.backgroundImage =
                "url('./images/alexander-voronov-fSGnRGfnTbY-unsplash.jpg')";
            }
            if (res.data.weather[0].description === "clear sky") {
              document.querySelector("#boxWrapper").style.backgroundImage =
                "url('./images/jessy-smith-gRNmj3nnadY-unsplash.jpg')";
            }
            if (res.data.weather[0].description === "overcast clouds") {
              document.querySelector("#boxWrapper").style.backgroundImage =
                "url('./images/annie-spratt-f10KG0S3BLM-unsplash.jpg')";
            }
            if (res.data.weather[0].description === "few clouds") {
              document.querySelector("#boxWrapper").style.backgroundImage =
                "url('./images/chris-9vp4aeh4bR4-unsplash.jpg')";
            }
            if (res.data.weather[0].description === "scattered clouds") {
              document.querySelector("#boxWrapper").style.backgroundImage =
                "url('./images/jason-wong-NCb50hjk-pQ-unsplash.jpg')";
            }
            if (res.data.weather[0].description === "broken clouds") {
              document.querySelector("#boxWrapper").style.backgroundImage =
                "url('./images/martin-sanchez-XPrTcGdv5n8-unsplash.jpg')";
            }
            if (res.data.weather[0].description === "shower rain") {
              document.querySelector("#boxWrapper").style.backgroundImage =
                "url('./images/pan-xiaozhen-OKlo0r3gBcQ-unsplash.jpg')";
            }
            if (res.data.weather[0].description === "rain") {
              document.querySelector("#boxWrapper").style.backgroundImage =
                "url('./images/anjana-menon-v3UZKbMaTGk-unsplash.jpg')";
            }
            if (res.data.weather[0].description === "thunderstorm") {
              document.querySelector("#boxWrapper").style.backgroundImage =
                "url('./images/johannes-plenio-GmBT6GQEOs0-unsplash.jpg')";
            }
            if (res.data.weather[0].description === "snow") {
              document.querySelector("#boxWrapper").style.backgroundImage =
                "url('./images/josh-hild-_TuI8tZHlk4-unsplash.jpg')";
            }
            if (res.data.weather[0].description === "snow") {
              document.querySelector("#boxWrapper").style.backgroundImage =
                "url('./images/goran-vucicevic-EuuIa8XTLK4-unsplash.jpg')";
            }
            document.querySelector("#dataWrapper").innerHTML = `            
                <p class='locationName'>Country: ${res.data.sys.country}</p>
                <p class='weather'>${res.data.main.temp} ${res.data.name}
                  
                </p>
            `;
            document.querySelector("#weatherDetails__data").innerHTML = `
                <p>Minimum Temperature <span class='values'>${res.data.main.temp_min}</span></p>
                <p>Maximum Temperature <span class='values'>${res.data.main.temp_max}</span></p>
                <p>Feels Like <span class='values'>${res.data.main.feels_like}</span></p>
                <p>humidity <span class='values'>${res.data.main.humidity}</span></p>
                <div id='weatherDetails__icon-section'>
                  <p class='description'>${res.data.weather[0].description}</p>
                  <img src='https://openweathermap.org/img/wn/${res.data.weather[0].icon}@2x.png' class='weather_icon' />
                </div>
            `;
            let userInput = (document.querySelector("#locationName").value =
              "");
          })
          .catch((error) => console.log(error));
      };
    </script>
  </body>
</html>
